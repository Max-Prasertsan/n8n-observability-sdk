# ============================================================
# n8n Telemetry SDK - Environment Configuration
# ============================================================
# Copy this file to .env and customize for your environment
# Location: Place in the root of n8n-telemetry-sdk/ directory
# ============================================================

# ============ Telemetry Output ============

# Path to JSONL file for storing telemetry events
# Relative paths are from where n8n is started
TELEMETRY_FILE_PATH=./data/events.jsonl

# HTTP endpoint for sending events (optional)
# Leave empty to only use file transport
TELEMETRY_HTTP_ENDPOINT=

# API key for HTTP endpoint authentication (optional)
TELEMETRY_API_KEY=

# ============ Feature Toggles ============

# Enable/disable telemetry collection entirely
# Set to 'false' to disable
TELEMETRY_ENABLED=true

# Enable/disable evaluation scoring at workflow end
# Set to 'false' to skip scoring
TELEMETRY_ENABLE_EVAL=true

# Enable/disable payload capture (input/output data)
# Set to 'false' for minimal telemetry (only timings)
TELEMETRY_CAPTURE_PAYLOADS=true

# Enable/disable redaction of sensitive fields
# Set to 'false' to capture raw payloads (not recommended)
TELEMETRY_REDACT_PAYLOADS=true

# ============ Debug ============

# Enable debug logging (prints all events to console)
# Set to 'true' for troubleshooting
TELEMETRY_DEBUG=false

# ============ n8n Integration ============

# Path to external hooks file (for automatic lifecycle capture)
# Used when starting n8n with: N8N_EXTERNAL_HOOKS=$TELEMETRY_HOOKS_PATH
TELEMETRY_HOOKS_PATH=./packages/n8n-extension-telemetry/dist/n8n-external-hooks.js

# ============ Evaluation Thresholds ============

# Maximum workflow duration before penalty (milliseconds)
TELEMETRY_MAX_WORKFLOW_DURATION_MS=60000

# Maximum node duration before penalty (milliseconds)
TELEMETRY_MAX_NODE_DURATION_MS=10000

# Points deducted per failed node
TELEMETRY_FAILED_NODE_PENALTY=15

# ============ Metadata ============

# Default environment tag
NODE_ENV=development

# n8n version (auto-detected if running in n8n)
N8N_VERSION=
